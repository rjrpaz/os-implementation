<html>
<head>
                                                                        
                                                              
  <meta http-equiv="content-type" content="text/html; charset=ISO-8859-1">
  <title>CMSC 412, Project 0</title>
</head>
 <body>
<h1>Introduction</h1>
In this course we will implement a big project in subsequent phases.        
In  each project  we will be adding some new functionality 
to  <a href="http://geekos.sourceforge.net/">            GeekOS</a>
. To run our OS,  we need to either use an actual machine (which 
must  be  an x86 machine) or  the other (simpler) idea is to use an emulator; 
we  will  use  <a href="http://bochs.sourceforge.net/">Bochs</a>,
version 2.0.2.
<h1>Linuxlab</h1>
You will do all of your development for this course
on  the   linuxlab         cluster.   You have received a user name and a
password   during the  first        week  of classes,   and will use that
to access  the cluster,  and the   lab.     If you  haven't, please   contact
you professor to get one, as soon  as possible. The lab is located
in 3107   <a href="http://www.cs.umd.edu/csic/">           CSI</a>
                (the        new Computer  Science Instructional Center) 
                             
<p>To access the cluster remotely, you have to use ssh (it doesn't accept 
               telnet  requests). The domain name is <tt>linuxlab.csic.umd.edu</tt>
               .  So   it will  be something like:<br>
                </p>
                               
<blockquote><tt>ssh -l</tt> &lt;your username&gt; <tt>linuxlab.csic.umd.edu</tt><br>
                  </blockquote>
                                 
  <h1>Compiling your kernel</h1>
First of all you need to have <b>bochs</b> in your PATH.<br>If your shell is <i>csh</i> (default on Linuxlab), add them with
<p>
<tt>$ setenv PATH /usr/local/bochs-2.0.2/bin:$PATH</tt>
<p>If your shell is <i>bash</i>, add them with
<p>
<tt>$ export PATH=/usr/local/bochs-2.0.2/bin:$PATH</tt><p>

Now you can download and compile the kernel
<p>
<ul>
<li> download the project tarball (<tt>project0.tgz</tt>)<p>
<li> uncompress it: <br>
<tt>$ gunzip project0.tgz</tt><br>
 <tt>$ tar xf project0.tar</tt><p>
<li> compile the kernel:<br>
<tt>$ cd project0/build</tt><br>
<tt>$ gmake</tt><br>
</ul>

Note that GeekOS requires <b>gmake</b> (GNU make utility) instead of <b>make</b>.<br>
                                 
  <h1>Running your kernel on top of Bochs</h1>
                                 Once you have the kernel built, it's the 
time   to  run   <b>bochs</b>    and   load   your   kernel into it. <b>Bochs</b> is installed
   in<br>
                                 
  <blockquote><tt>/usr/local/bochs-2.0.2</tt><br>
                    </blockquote>
                                 on the linuxlab cluster. If you are working
  on  one   of  the   workstations       in  the linuxlab room, just go to
 your  project's   <tt>build</tt>  directory   and run <b>bochs</b>.<p>

<tt>$ bochs</tt><br>
       (Make  sure you run
it  from  that   directory   so that it can find     the     <b>
.bochsrc</b>    file which is   given to you,   and tells bochs what    to
 do.)                                                                   
 
    <p>    If you are working remotely, e.g. from your WAM/Glue account,
first         download   the fonts file, and uncompress/untar it in your
account.   then     do:     </p>
                                   
    <blockquote><tt>xset fp+</tt> &lt;the font directory in your account&gt; 
            </blockquote>
                                 For example, if you have saved the files 
in  the   directory      ~/fonts,     and   your user name in WAM is bob, 
do                                                                       
                
      <blockquote><tt>xset fp+ ~bob/fonts</tt></blockquote>
                                       
        <p>     After this, do         </p>
                                       
        <blockquote><tt>xhost +</tt></blockquote>
                                 and then you must be able to run bochs from
  your   <i>linuxlab       account</i>     , and   have  the output on your
  WAM/Glue   X session.                                                 
                                                                     
          <p>     Note: you have to do these two steps <i>every time</i>
you logon to  your  account. Also, the second step is sort of dangerous,
because it enables  clients  from <i>any</i> host to connect to your X session!
                                                      </p>
                                         
          <h2>Adding the fonts in WAM</h2>
                      Unfortunately, there is a problem with WAM's font server, 
   which    makes   adding the fonts   need more steps. Specifically, instead 
   of<br>
                                         
          <blockquote><tt>xset fp+</tt> &lt;path&gt;<br>
                            </blockquote>
                      do the following if you're working from a WAM workstation:
    (Again,     these   have  to be done from your <i>WAM</i> account, and
 the   text in  <tt><b>   bold</b></tt>   must be entered as is.)       
                                                                        
             
            <ul>
                              
		<li>Download this XFS config file <a href="bochs.xfs">bochs.xfs</a>	      
		<li>Edit the <i>catalogue</i> line in bochs.xfs to match the directory where you downloaded the fonts
              <li>Start XFS (don't forget the <tt><b>&amp;</b></tt>     
at  the  end):                                                          
                                                                        
                              
                <blockquote><b><tt> xfs -config bochs.xfs -port 7777
          &amp;</tt></b></blockquote>
                                </li>
                                
                <li>Set XFS in the current display:                     
                                                                        
                                                                        
                  <blockquote><b><tt>xset +fp tcp/</tt></b>127.0.0.1<b><tt>:7777</tt></b></blockquote>
                                  </li>
                                  
                  <li>Rehash it:                                        
                                                                        
                                           
                    <blockquote><b><tt>xset fp rehash</tt></b></blockquote>
                                    </li>
                                                 
                  </ul>
                                                 
<!--                    <p>For example, if your workstation's IP address is 128.8.17.52, -->
<!--  the second        command will be:                   </p> -->
                                                 
<!--                    <blockquote><b><tt>xset +fp tcp/128.8.17.52:7100</tt></b></blockquote> -->
                                                   
<!--                      <p>To find out what your workstation IP address is, you -->
<!--  can do:                                          </p> -->
                                                   
<!--                      <blockquote><b><tt>host $HOST</tt></b></blockquote> -->
                                                     
                          </body>
                          </html>
